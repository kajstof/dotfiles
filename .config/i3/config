### general

# font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:Ubuntu 10

# super (Windows key) as Mod key
set $mod Mod4

### mouse section

# use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# the middle button over a titlebar kills the window
bindsym --release button2 kill

# the middle button and a modifer over any part of the window kills the window
bindsym --whole-window $mod+button2 kill

### keyboard section

# start a terminal
bindsym $mod+Return exec i3-sensible-terminal
bindsym $mod+t exec i3-sensible-terminal

# kill focused window
bindsym $mod+Shift+q kill

# start rofi
bindsym $mod+d exec rofi -show drun

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split in horizontal orientation
bindsym $mod+b split h

# Split in vertical orientation
bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# move focused workspace between monitors
bindsym $mod+Ctrl+h move workspace to output left
bindsym $mod+Ctrl+Left move workspace to output left
# bindsym $mod+Ctrl+Less move workspace to output left
bindsym $mod+Ctrl+l move workspace to output right
bindsym $mod+Ctrl+Right move workspace to output right
# bindsym $mod+Ctrl+Greater move workspace to output right

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
bindsym $mod+Shift+d focus child

set $workspace01 "1:   Browsers"
set $workspace02 "2:  Terminals"
set $workspace03 "3:  Rider"
set $workspace04 "4:  VsCode"
set $workspace05 "5:  Common"
set $workspace06 "6:  LifeFlow"
set $workspace07 "7:  Communication"
set $workspace08 "8:  Media"
set $workspace09 "9:  OBS"
set $workspace10 "10:  Common"

set $output1 DP-3
set $output2 DP-1

workspace $workspace01 output $output1
workspace $workspace02 output $output1
workspace $workspace03 output $output1
workspace $workspace04 output $output1
workspace $workspace05 output $output1
workspace $workspace06 output $output2
workspace $workspace07 output $output2
workspace $workspace08 output $output2
workspace $workspace09 output $output2
workspace $workspace10 output $output2

# switch to workspace
bindsym $mod+1 workspace $workspace01
bindsym $mod+2 workspace $workspace02
bindsym $mod+3 workspace $workspace03
bindsym $mod+4 workspace $workspace04
bindsym $mod+5 workspace $workspace05
bindsym $mod+6 workspace $workspace06
bindsym $mod+7 workspace $workspace07
bindsym $mod+8 workspace $workspace08
bindsym $mod+9 workspace $workspace09
bindsym $mod+0 workspace $workspace10

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $workspace01
bindsym $mod+Shift+2 move container to workspace $workspace02
bindsym $mod+Shift+3 move container to workspace $workspace03
bindsym $mod+Shift+4 move container to workspace $workspace04
bindsym $mod+Shift+5 move container to workspace $workspace05
bindsym $mod+Shift+6 move container to workspace $workspace06
bindsym $mod+Shift+7 move container to workspace $workspace07
bindsym $mod+Shift+8 move container to workspace $workspace08
bindsym $mod+Shift+9 move container to workspace $workspace09
bindsym $mod+Shift+0 move container to workspace $workspace10

# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart
# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

# resize window (you can also use the mouse for that)
mode "resize" {
    bindsym h resize shrink width 10 px or 10 ppt
    bindsym j resize grow height 10 px or 10 ppt
    bindsym k resize shrink height 10 px or 10 ppt
    bindsym l resize grow width 10 px or 10 ppt

    # same bindings, but for the arrow keys
    bindsym Left resize shrink width 1 px or 1 ppt
    bindsym Down resize grow height 1 px or 1 ppt
    bindsym Up resize shrink height 1 px or 1 ppt
    bindsym Right resize grow width 1 px or 1 ppt

    # back to normal: Enter or Escape
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

bindsym $mod+r mode "resize"

# set $bg-color            #2f343f
# set $inactive-bg-color   #2f343f
# set $text-color          #f3f4f5
# # set $inactive-text-color #676e7d
# set $inactive-text-color #cccccc
# set $active-text-color   #990000
# set $border-color        #ff0000
# set $urgent-bg-color     #e53935
# set $urgent-bg-colorx    #e57975
# set $indicator-color     #ffff00
# set $separator-color     #757575

set $bg-color            #2f343f
set $inactive-bg-color   #2f343f
set $text-color          #f3f4f5
# set $inactive-text-color #676e7d
set $inactive-text-color #cccccc
set $active-text-color   #0066cc
set $border-color        #0066cc
set $urgent-bg-color     #e53935
set $urgent-bg-colorx    #e57975
set $indicator-color     #ffff00
set $separator-color     #757575

# window colors
#                       border             background           text                 indicator
client.focused          $border-color      $active-text-color   $inactive-text-color $indicator-color
client.unfocused        $inactive-bg-color $inactive-bg-color   $inactive-text-color $indicator-color
client.focused_inactive $inactive-bg-color $inactive-bg-color   $inactive-text-color $indicator-color
client.urgent           $urgent-bg-color   $urgent-bg-color     $text-color          $indicator-color

bindsym Mod1+Tab workspace next_on_output
bindsym Mod1+Shift+Tab workspace prev_on_output
bindsym $mod+Tab focus output left
bindsym $mod+Shift+Tab focus output right
bindsym $mod+Ctrl+Up exec python3 ~/dotfiles/scripts/i3-move-container-up.py
bindsym $mod+Ctrl+k exec python3 ~/dotfiles/scripts/i3-move-container-up.py
bindsym $mod+Ctrl+Down exec python3 ~/dotfiles/scripts/i3-move-container-down.py
bindsym $mod+Ctrl+j exec python3 ~/dotfiles/scripts/i3-move-container-down.py
bindsym $mod+Ctrl+Tab exec python3 ~/dotfiles/scripts/i3-swap-workspaces.py

# border & titlebar
new_window normal
hide_edge_borders smart
bindsym $mod+Ctrl+x [class="^.*"] border toggle

for_window [class="^.*"] border pixel 1
#for_window [class="URxvt"] border normal
#for_window [class="Leafpad"] border normal
#for_window [class="Lxappearance"] border normal
#for_window [class="mpv"] border pixel 0
#for_window [class="Geary"] border pixel 0
#for_window [class="Lmms"] border pixel 0
#for_window [class="Feh"] border pixel 0
for_window [class="Lxappearance"] floating enable
for_window [class="Pcmanfm"] floating enable
#for_window [class="Org.gnome.Nautilus"] floating enable
for_window [class="Pavucontrol"] floating enable
for_window [class="Blueman-manager"] floating enable
for_window [class="copyq"] floating enable
for_window [class="Crow Translate"] floating enable

assign [class="Google-chrome" window_role="browser"] $workspace01
assign [class="Firefox" window_role="browser"] $workspace01
assign [class="Opera"] $workspace01
# assign [class="X-terminal-emulator"] $workspace02
# assign [class="Termite"] $workspace02
# assign [class="Gnome-terminal"] $workspace02
assign [class="jetbrains-rider"] $workspace03
assign [class="Code"] $workspace04
assign [class="Microsoft Teams - Preview"] $workspace06
assign [class="Thunderbird"] $workspace06
assign [class="Signal"] $workspace07
assign [class="Slack"] $workspace07
assign [class="discord"] $workspace07
assign [class="mpv"] $workspace08
assign [class="Vlc"] $workspace08
# assign [class="Rhytmbox"] $workspace08
assign [class="obs"] $workspace09

# configuration edit
bindsym $mod+Ctrl+v exec "code ~/.config/i3/config ~/.config/polybar/config ~/.zshrc ~/.Xresources ~/.config/alacritty/alacritty.yml ~/.config/dunst/dunstrc ~/.config/rofi/config ~/.config/termite/config ~/.config/vifm/vifmrc"

# pulseaudio controls
bindsym $mod+Shift+a exec pavucontrol
bindsym XF86AudioRaiseVolume exec pactl set-sink-volume 0 +5% #increase sound volume
bindsym XF86AudioLowerVolume exec pactl set-sink-volume 0 -5% #decrease sound volume
bindsym XF86AudioMute exec pactl set-sink-mute 0 toggle # mute sound

# screen brightness controls
bindsym XF86MonBrightnessUp exec xbacklight -inc 20 # increase screen brightness
bindsym XF86MonBrightnessDown exec xbacklight -dec 20 # decrease screen brightness

# touchpad controls
#bindsym XF86TouchpadToggle exec ~/dotfiles/toggletouchpad.sh # toggle touchpad

# media player controls
bindsym XF86AudioPlay exec playerctl play-pause
# bindsym XF86AudioPause exec playerctl pause
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPrev exec playerctl previous

# lock screen
bindsym $mod+Shift+x exec i3lock-fancy

# i3gaps
gaps inner 6
smart_gaps on

# screenshots
bindsym Print exec flameshot gui
# bindsym Print exec maim ~/Pictures/$(date +%s).png
# bindsym $mod+Print exec maim ~/Pictures/$(date +%s).png -s
# bindsym $mod+Shift+s exec maim ~/Pictures/$(date +%s).png

# workspace_auto_back_and_forth yes|no
# workspace_auto_back_and_forth yes
# focus_on_window_activation smart|urgent|focus|none
# focus_on_window_activation focus

# workspace 01 gaps inner 75

# exec --no-startup-id /usr/bin/nvidia-settings --load-config-only

# monitor configuration
exec --no-startup-id (sleep 1 && ~/.screenlayout/acer+dell.sh)

# applications at startup
exec --no-startup-id picom -CG
exec_always --no-startup-id /usr/bin/feh --bg-scale ~/dotfiles/wallpapers/earth_sunrise_from_space-wallpaper-2560x1440.jpg
exec --no-startup-id ~/dotfiles/scripts/dell_5411_touchpad.sh
exec_always --no-startup-id ~/dotfiles/scripts/caps_esc.sh # Doesn't work with VSCode
exec --no-startup-id /usr/bin/gnome-keyring-daemon --start --components=pkcs11,secrets,ssh
exec --no-startup-id nm-applet
exec --no-startup-id copyq
exec_always --no-startup-id echo 0 | tee /sys/module/hid_apple/parameters/fnmode
exec_always --no-startup-id xset r rate 200 50 
exec_always --no-startup-id ~/dotfiles/scripts/polybar_launch.sh
exec --no-startup-id QT_QPA_PLATFORMTHEME=gtk3 crow
exec --no-startup-id firefox
exec --no-startup-id teams
exec --no-startup-id thunderbird
exec --no-startup-id signal-desktop
exec --no-startup-id slack
exec --no-startup-id discord
exec --no-startup-id ~/.local/share/JetBrains/Toolbox/bin/jetbrains-toolbox %u
